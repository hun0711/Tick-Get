<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="back.spring.final_back.board.repository.PaymentDao">


<!-- 결제 정보 조회 -->
<select id="paymentList" parameterType="PaymentDto" resultType="PaymentDto">
  select * from payment
  <!-- 사이트에서 결제된 모든 정보의 조회이다. 각 회원마다의 결제를 조회하려면 조건절 처리해야함. -->
</select>







<!-- 결제내역 상세정보  -->
<select id="paymentDetail" parameterType="PaymentDto" resultType="PaymentDto">
select * from payment
<where>
<if test="paymentId!=null">
and payment_Id = #{paymentId} <!-- 회원고유번호로 수정?  -->
</if>
</where>
</select>







<!-- 결제 내역 입력 -->
<insert id="paymentInsert" parameterType="PaymentDto">
insert into payment (payment_order_id,payment_order_name,payment_count,payment_price,payment_date,
                     payment_payer,payment_seller,board_mk_no)
VALUES (#{paymentOrderId},#{paymentOrderName,#{paymentCount},#{paymentPrice},#{paymentDate},
       #{paymentPayer},#{paymentSeller},#{boardMkNo}
       <!-- 토스 페이먼츠 api에서 결제 성공 시 결제완료 URL로 이동된다. URL페이지가 호출됐을 때 결제정보가 insert되어야 한다.   -->
</insert>






<!-- 결제 내역 삭제 (환불) -->
<delete id="paymentDelete" parameterType="PaymentDto">
delete * from payment
<where>
<if test='paymentId != null and paymentId > 0'>
 and payment_id = #{paymentId}
</if>
</where>
</delete>



</mapper>